<h1 id="credentials">Credentials</h1>

<p>In Automation Controller/AWX credentials are stored encrypted.
In addition to the standard credential types, the following custom credential types may be needed:</p>

<ul>
  <li>Credentials to register Red Hat subscriptions with an activation key</li>
  <li>Credentials to download SAP software</li>
</ul>

<h2 id="configure-custom-credential-types">Configure Custom Credential Types</h2>

<p>Go to <code class="highlighter-rouge">Administration</code> -&gt; <code class="highlighter-rouge">Credential Types</code></p>

<h3 id="credentials-to-register-systems-to-rhn-with-an-activation-key">Credentials to Register Systems to RHN with an Activation Key</h3>

<p>The variables defined here are used in the role <code class="highlighter-rouge">mk_ansible_roles.subscribe_rhn</code>. You may use other ways to subscribe your RHEL system, then you don’t need this.</p>

<ol>
  <li>Click <code class="highlighter-rouge">Add</code></li>
  <li>Enter the following:
    <ul>
      <li><strong>Name</strong>: SAP S-User</li>
      <li>
        <p><strong>Input Configuration</strong>:</p>

        <p><code class="highlighter-rouge">yaml
fields:
  - id: activationkey
    type: string
    label: Activation Key
    secret: true
  - id: orgid
    type: string
    label: Organization ID
    secret: true
required:
  - activationkey
  - orgid
</code></p>
      </li>
      <li><strong>Injector Creation</strong>:
<code class="highlighter-rouge">yaml
---
extra_vars:
  reg_activation_key: ''
  reg_organization_id: ''
</code></li>
    </ul>
  </li>
  <li>Click <code class="highlighter-rouge">Save</code></li>
</ol>

<p>This creates a Form for injecting the two variable <code class="highlighter-rouge">reg_activation_key</code> and <code class="highlighter-rouge">reg_organization_id</code> to a job template (available to the playbook).
If you want to use username, password and pool id for registration, you can do so. Just create a similar template, injecting the variables <code class="highlighter-rouge">reg_username</code>, <code class="highlighter-rouge">reg_password</code> and <code class="highlighter-rouge">reg_pool</code> or <code class="highlighter-rouge">reg_pool_ids</code></p>

<h3 id="sap-s-user-credentials">SAP S-User Credentials</h3>

<p>S-User credentials are needed  to download SAP Software</p>

<ol>
  <li>Click <code class="highlighter-rouge">Add</code></li>
  <li>Enter the following:
    <ul>
      <li><strong>Name</strong>: SAP S-User</li>
      <li>
        <p><strong>Input Configuration</strong>:</p>

        <p><code class="highlighter-rouge">yaml
fields:
  - id: suser_id
    type: string
    label: SAP S-User ID
    secret: false
  - id: suser_password
    type: string
    label: SAP S-User password
    secret: true
required:
  - suser_id
  - suser_password
</code></p>
      </li>
      <li><strong>Injector Creation</strong>:
<code class="highlighter-rouge">yaml
---
extra_vars:
  suser_id: ''
  suser_password: ''
</code></li>
    </ul>
  </li>
  <li>Click <code class="highlighter-rouge">Save</code></li>
</ol>

<p>This credential injects the variables <code class="highlighter-rouge">suser_id</code> and <code class="highlighter-rouge">suser_password</code> which are required by the <code class="highlighter-rouge">sap_launchpad</code> collection</p>

<h2 id="configure-credentials">Configure Credentials</h2>

<p>To configure credentials go to  <code class="highlighter-rouge">Resources</code> -&gt; <code class="highlighter-rouge">credentials</code></p>

<h3 id="machine-credential-for-connection-and-privilege-escalation">machine credential for connection and privilege escalation</h3>

<p>The machine credential is used to login to a server and to gain privilege escalation.
1. click <code class="highlighter-rouge">Add</code>  and enter the following:
    - <strong>Name</strong>: <em>name of your credential</em>
    - <strong>Organization</strong>: Select your Organization
    - <strong>Credential Type</strong>: Machine
    - <strong>Username</strong> and login credentials (e.g., password, ssh-key etc.) of the connection user
    - <strong>Privilege Escalation Username</strong>: root
    - <strong>Privilege  Escalation Password</strong>: if required
    - <strong>Privilege Escalation Method</strong>: if required, e.g. if you use <code class="highlighter-rouge">root</code> as your connection user you need to change this to <code class="highlighter-rouge">su</code>.
2. Click <code class="highlighter-rouge">Save</code></p>

<h3 id="rhn-activation-key-for-subscribing-against-rhel">RHN Activation key for subscribing against RHEL</h3>

<p>The credential type has been created in the previous section</p>

<ol>
  <li>click <code class="highlighter-rouge">Add</code>  and enter the following:
    <ul>
      <li><strong>Name</strong>: RHN Activation Key</li>
      <li><strong>Organization</strong>: Select your Organization</li>
      <li><strong>Credential Type</strong>: RHN Activation Key</li>
      <li><strong>Activation Key</strong>: <em>Your Activation Key</em></li>
      <li><strong>Organization ID</strong>: <em>Your Organization ID</em></li>
    </ul>
  </li>
  <li>Click <code class="highlighter-rouge">Save</code></li>
</ol>

<h3 id="s-user-credentials">S-User Credentials</h3>

<p>The credential type has been created in the previous section and is used to download SAP software</p>

<ol>
  <li>click <code class="highlighter-rouge">Add</code>  and enter the following:
    <ul>
      <li><strong>Name</strong>: SAP S-User</li>
      <li><strong>Organization</strong>: Select your Organization</li>
      <li><strong>Credential Type</strong>: SAP S-User</li>
      <li><strong>SAP S-User ID</strong>: <em>S1234567</em></li>
      <li><strong>SAP S-User Password</strong>: <em>Your Password</em></li>
    </ul>
  </li>
  <li>Click <code class="highlighter-rouge">Save</code></li>
</ol>

<h3 id="ansible-automation-hub">Ansible Automation Hub</h3>

<p>For downloading credentials from Ansible Automation Hub this credential is needed:</p>

<ol>
  <li>Click <code class="highlighter-rouge">add</code> and enter the following:
    <ul>
      <li><strong>Name</strong>: Ansible Automaton</li>
      <li><strong>Organization</strong>: Select your Organization</li>
      <li><strong>Credential Type</strong>: Ansible Galaxy/Automation Hub API Token</li>
      <li><strong>Galaxy Server URL</strong>:  <em>copy from https://console.redhat.com/ansible/automation-hub/token</em></li>
      <li><strong>Auth Server URL</strong>: <em>copy from https://console.redhat.com/ansible/automation-hub/token</em></li>
      <li><strong>API Token</strong>: Access Token generated at https://console.redhat.com/ansible/automation-hub/token</li>
    </ul>
  </li>
  <li>Click <code class="highlighter-rouge">Save</code></li>
</ol>

<p>In order to use the token properly go to <code class="highlighter-rouge">Organizations</code>
- select your Organization
- click <code class="highlighter-rouge">Edit</code>
- Add the previously created token to the <code class="highlighter-rouge">Galaxy Credentials</code> field
- Ensure the order is as you want
- Click <code class="highlighter-rouge">Save</code></p>

<h3 id="vmware-vcenter-credential">VMware vCenter Credential</h3>

<p>For connections to VMware this credential is required</p>

<ol>
  <li>click <code class="highlighter-rouge">Add</code>  and enter the following:
    <ul>
      <li><strong>Name</strong>: <em>name of your credential</em></li>
      <li><strong>Organization</strong>: Select your Organization</li>
      <li><strong>Credential Type</strong>: VMware vCenter</li>
      <li><strong>VCenter Host</strong>: <em>IP Address  or Hostname of vCenter Server</em></li>
      <li><strong>Username</strong>: <em>User with administrative permissions</em></li>
      <li><strong>Password</strong>: _ Password for t</li>
    </ul>
  </li>
  <li>Click <code class="highlighter-rouge">Save</code></li>
</ol>

<p>It injects the environment variables <code class="highlighter-rouge">VMWARE_HOST</code>, <code class="highlighter-rouge">VMWARE_USER</code> and <code class="highlighter-rouge">VMWARE_PASSWORD</code> to the playbook in a template. 
These variables are used by the VMware collections, that are used in these examples</p>

<h3 id="ibm-powervc-credential">IBM PowerVC Credential</h3>

<p>IBM PowerVC implements the OpenStack API.
For connections to PowerVC this credential is required.</p>

<ol>
  <li>Click <code class="highlighter-rouge">Add</code></li>
  <li>Enter the following parameters
    <ul>
      <li><strong>Name</strong>: <code class="highlighter-rouge">PowerVC Credential</code></li>
      <li><strong>Organization</strong>: <code class="highlighter-rouge">Default</code></li>
      <li><strong>Credential Type</strong>: <code class="highlighter-rouge">OpenStack</code></li>
      <li><strong>Username</strong>: user with permissions to create LPARs etc. in PowerVC</li>
      <li><strong>Password</strong>: password for this user</li>
      <li><strong>host authentication URL</strong> (e.g. https://my-powervc:5000/v3)</li>
      <li><strong>Project</strong>: (Tenant Name)</li>
      <li><strong>Project Domain Name</strong>: <code class="highlighter-rouge">Default</code></li>
      <li><strong>Domain Name</strong>: <code class="highlighter-rouge">Default</code></li>
      <li>De-select Verify SSL, if you use self-signed certificates in PowerVC
<img src="assets/img/aap-create-OpenStack-Credential.png" alt="aap-project-screenshot" />
You get the information on username and project by logging into PowerVC and by clicking on the user logo in the top right of PowerVC:<br /><br />
<img src="assets/img/powervc-info.png" alt="screenshot PowerVC" /></li>
    </ul>
  </li>
  <li>Click Save</li>
</ol>

<p>| <strong>Please Note</strong>                         |
|:—————————————-|</p>

<blockquote>
  <p>In the AAP/AWX credentials you can only define the previous parameters for authentication.
Define the following dictionary in addition to  the OpenStack credential in case you need additional parameters, e.g. <code class="highlighter-rouge">user_domain_name</code> for authentication in your inventory or template definition:</p>
  <pre>
    os_add_auth:  
      user_domain_name: Default          # additional parameters for auth section
</pre>
</blockquote>
